@echo off
rem generated by builder.pl: compiles using MSVC

if not "%MSVCDIR%" == "" goto got_msvc
if not "%MSDEVDIR%" == "" goto got_msvc

echo MSVC not installed: you need to run vcvars32.bat
goto end

:got_msvc

cl.exe /nologo /W3 /GX /O2 /YX /FD /c src\error.c /Foobj\error.obj
echo obj\error.obj > _ld.arg

cl.exe /nologo /W3 /GX /O2 /YX /FD /c src\gamecore.c /Foobj\gamecore.obj
echo obj\gamecore.obj >> _ld.arg

cl.exe /nologo /W3 /GX /O2 /YX /FD /c src\gui.c /Foobj\gui.obj
echo obj\gui.obj >> _ld.arg

cl.exe /nologo /W3 /GX /O2 /YX /FD /c src\init.c /Foobj\init.obj
echo obj\init.obj >> _ld.arg

cl.exe /nologo /W3 /GX /O2 /YX /FD /c src\intro.c /Foobj\intro.obj
echo obj\intro.obj >> _ld.arg

cl.exe /nologo /W3 /GX /O2 /YX /FD /c src\langsel.c /Foobj\langsel.obj
echo obj\langsel.obj >> _ld.arg

cl.exe /nologo /W3 /GX /O2 /YX /FD /c src\misc.c /Foobj\misc.obj
echo obj\misc.obj >> _ld.arg

cl.exe /nologo /W3 /GX /O2 /YX /FD /c src\multitet.c /Foobj\multitet.obj
echo obj\multitet.obj >> _ld.arg

cl.exe /nologo /W3 /GX /O2 /YX /FD /c src\score.c /Foobj\score.obj
echo obj\score.obj >> _ld.arg

echo Linking
cl.exe /nologo /Fe.\multitet.exe  alleg.lib @_ld.arg
del _ld.arg > nul

echo Done!
:end
